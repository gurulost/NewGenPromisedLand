
 RUN  v3.2.4 /home/runner/workspace

stdout | shared/logic/unitLogic.test.ts > Unit Logic > getVisibleUnits > should return all own units
ðŸŽ® getVisibleUnits Debug: {
  currentPlayerId: [32m'player1'[39m,
  totalUnits: [33m2[39m,
  visibleUnits: [33m1[39m,
  allUnitsInfo: [
    {
      id: [32m'unit1'[39m,
      playerId: [32m'player1'[39m,
      coordinate: [36m[Object][39m,
      visionRadius: [33m2[39m,
      attackRange: [33m1[39m,
      isVisible: [33mtrue[39m
    },
    {
      id: [32m'enemy1'[39m,
      playerId: [32m'player2'[39m,
      coordinate: [36m[Object][39m,
      visionRadius: [33m2[39m,
      attackRange: [33m1[39m,
      isVisible: [33mfalse[39m
    }
  ]
}

stdout | shared/logic/unitLogic.test.ts > Unit Logic > getVisibleUnits > should include enemy units within vision range
ðŸŽ® getVisibleUnits Debug: {
  currentPlayerId: [32m'player1'[39m,
  totalUnits: [33m2[39m,
  visibleUnits: [33m2[39m,
  allUnitsInfo: [
    {
      id: [32m'unit1'[39m,
      playerId: [32m'player1'[39m,
      coordinate: [36m[Object][39m,
      visionRadius: [33m2[39m,
      attackRange: [33m1[39m,
      isVisible: [33mtrue[39m
    },
    {
      id: [32m'enemy1'[39m,
      playerId: [32m'player2'[39m,
      coordinate: [36m[Object][39m,
      visionRadius: [33m2[39m,
      attackRange: [33m1[39m,
      isVisible: [33mtrue[39m
    }
  ]
}

stdout | shared/logic/unitLogic.test.ts > Unit Logic > getVisibleUnits > should exclude enemy units outside vision range
ðŸŽ® getVisibleUnits Debug: {
  currentPlayerId: [32m'player1'[39m,
  totalUnits: [33m2[39m,
  visibleUnits: [33m1[39m,
  allUnitsInfo: [
    {
      id: [32m'unit1'[39m,
      playerId: [32m'player1'[39m,
      coordinate: [36m[Object][39m,
      visionRadius: [33m2[39m,
      attackRange: [33m1[39m,
      isVisible: [33mtrue[39m
    },
    {
      id: [32m'enemy1'[39m,
      playerId: [32m'player2'[39m,
      coordinate: [36m[Object][39m,
      visionRadius: [33m2[39m,
      attackRange: [33m1[39m,
      isVisible: [33mfalse[39m
    }
  ]
}

 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > isPassableForUnit > should allow movement on plains 3ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > isPassableForUnit > should allow movement on mountains 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > isPassableForUnit > should block movement on water 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > isPassableForUnit > should block movement to tiles with enemy units 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > isPassableForUnit > should allow movement to tiles with friendly units 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > calculateReachableTiles > should return tiles within movement range 1ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > calculateReachableTiles > should respect movement limitations 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > calculateReachableTiles > should exclude impassable terrain 1ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > calculateReachableTiles > should return only current tile when unit has zero remaining movement 1ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > calculateReachableTiles > should handle units with different movement ranges 1ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > calculateReachableTiles > should handle units on map edges correctly 1ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > canSelectUnit > should allow selecting own units 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > canSelectUnit > should not allow selecting enemy units 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > canSelectUnit > should not allow selecting units when not current player 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > canUnitReachCoordinate > should return true for coordinates within movement range 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > canUnitReachCoordinate > should return false for coordinates beyond movement range 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > canUnitReachCoordinate > should return false for impassable coordinates 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getValidAttackTargets > should return enemy units within attack range 2ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getValidAttackTargets > should not return enemy units outside attack range 1ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getValidAttackTargets > should not return friendly units 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getValidAttackTargets > should find targets for ranged units at greater distances 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getValidAttackTargets > should not find targets beyond ranged unit attack range 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getValidAttackTargets > should handle units with extended attack ranges correctly 1ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getValidAttackTargets > should handle special unit types with different characteristics 1ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > canUnitAttackTarget > should allow attacking enemy units within range 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > canUnitAttackTarget > should not allow attacking units outside range 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > canUnitAttackTarget > should not allow attacking friendly units 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > isUnitVisibleToPlayer > should see own units 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > isUnitVisibleToPlayer > should see enemy units within vision range 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > isUnitVisibleToPlayer > should not see enemy units outside vision range 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > isUnitVisibleToPlayer > should see enemy units exactly at vision range boundary 0ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getVisibleUnits > should return all own units 5ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getVisibleUnits > should include enemy units within vision range 1ms
 âœ“ shared/logic/unitLogic.test.ts > Unit Logic > getVisibleUnits > should exclude enemy units outside vision range 1ms
stdout | shared/logic/gameReducer.test.ts > Game Reducer > MOVE_UNIT action > should move unit to valid adjacent tile
Movement distance: [33m1[39m Remaining movement: [33m2[39m
Target tile: {
  coordinate: { q: [33m1[39m, r: [33m0[39m, s: [33m-1[39m },
  terrain: [32m'plains'[39m,
  resources: [],
  hasCity: [33mfalse[39m,
  exploredBy: []
}

stdout | shared/logic/gameReducer.test.ts > Game Reducer > MOVE_UNIT action > should not move unit beyond movement range
Movement distance: [33m2[39m Remaining movement: [33m1[39m
Not enough movement

stdout | shared/logic/gameReducer.test.ts > Game Reducer > ATTACK_UNIT action > should deal damage in combat
Combat: warrior (5 attack) vs warrior (2 defense) = 3 damage

stdout | shared/logic/gameReducer.test.ts > Game Reducer > ATTACK_UNIT action > should remove unit when HP drops to 0 or below
Combat: warrior (5 attack) vs warrior (2 defense) = 3 damage

stdout | shared/logic/gameReducer.test.ts > Game Reducer > Invalid Actions > should not allow moving unit that does not belong to current player
Unit does not belong to current player

stdout | shared/logic/gameReducer.test.ts > Game Reducer > Invalid Actions > should handle actions for non-existent units gracefully
Unit not found: non-existent-unit

stdout | shared/logic/gameReducer.test.ts > Game Reducer > Complex Game Scenarios > should handle full turn cycle with movement and combat
Movement distance: [33m1[39m Remaining movement: [33m2[39m
Target tile: {
  coordinate: { q: [33m1[39m, r: [33m0[39m, s: [33m-1[39m },
  terrain: [32m'plains'[39m,
  resources: [],
  hasCity: [33mfalse[39m,
  exploredBy: []
}
Combat: warrior (5 attack) vs warrior (1 defense) = 4 damage

stdout | shared/logic/gameReducer.test.ts > Game Reducer > Complex Game Scenarios > should reject invalid moves at reducer level
Movement distance: [33m5[39m Remaining movement: [33m2[39m
Not enough movement

stdout | shared/logic/gameReducer.test.ts > Game Reducer > Complex Game Scenarios > should handle multiple units and coordinate conflicts
Movement distance: [33m1[39m Remaining movement: [33m2[39m
Target tile: {
  coordinate: { q: [33m1[39m, r: [33m0[39m, s: [33m-1[39m },
  terrain: [32m'plains'[39m,
  resources: [],
  hasCity: [33mfalse[39m,
  exploredBy: []
}

stdout | shared/logic/gameReducer.test.ts > Game Reducer > Complex Game Scenarios > should handle unit death and removal correctly
Combat: warrior (5 attack) vs warrior (0 defense) = 5 damage

stdout | shared/logic/gameReducer.test.ts > Game Reducer > State immutability > should not mutate original state
Movement distance: [33m1[39m Remaining movement: [33m2[39m
Target tile: {
  coordinate: { q: [33m1[39m, r: [33m0[39m, s: [33m-1[39m },
  terrain: [32m'plains'[39m,
  resources: [],
  hasCity: [33mfalse[39m,
  exploredBy: []
}

 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > MOVE_UNIT action > should move unit to valid adjacent tile 8ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > MOVE_UNIT action > should not move unit beyond movement range 1ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > ATTACK_UNIT action > should deal damage in combat 1ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > ATTACK_UNIT action > should remove unit when HP drops to 0 or below 1ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > END_TURN action > should advance to next player 1ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > END_TURN action > should reset unit movement 0ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > END_TURN action > should increment turn number when cycling back to first player 0ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > RESEARCH_TECH action > should add tech to researched list when player has enough stars 2ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > RESEARCH_TECH action > should not allow research without sufficient stars 1ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Invalid Actions > should not allow moving unit that does not belong to current player 2ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Invalid Actions > should not allow attacking friendly units 0ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Invalid Actions > should handle actions for non-existent units gracefully 0ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Enhanced END_TURN tests > should calculate and add star income correctly 0ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Enhanced END_TURN tests > should reset unit movement for next player units 1ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Enhanced END_TURN tests > should advance to next player correctly 0ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Complex Game Scenarios > should handle full turn cycle with movement and combat 2ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Complex Game Scenarios > should reject invalid moves at reducer level 1ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Complex Game Scenarios > should handle multiple units and coordinate conflicts 1ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > Complex Game Scenarios > should handle unit death and removal correctly 1ms
 âœ“ shared/logic/gameReducer.test.ts > Game Reducer > State immutability > should not mutate original state 2ms
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > renders victory screen with winner announcement 164ms
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > displays correct victory type 35ms
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > shows territorial victory correctly 41ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > renders unit actions panel with unit info 142ms
 Ã— shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > displays worker-specific actions 63ms
   â†’ Unable to find an element with the text: Construct terrain improvements. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 pointer-events-auto"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"rounded-xl border text-card-foreground shadow w-[500px] max-h-[80vh] overflow-y-auto bg-slate-900 border-slate-600"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"font-semibold leading-none tracking-tight flex items-center gap-3 text-white font-cinzel"[39m
            [36m>[39m
              [36m<svg[39m
                [33mclass[39m=[32m"lucide lucide-crown w-6 h-6 text-purple-400"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M5 21h14"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mWorker[0m
              [0m Actions[0m
            [36m</div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border bg-background shadow-sm hover:text-accent-foreground h-9 w-9 border-slate-600 text-slate-400 hover:bg-slate-700"[39m
            [36m>[39m
              [36m<svg[39m
                [33mclass[39m=[32m"lucide lucide-x w-4 h-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M18 6 6 18"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 6 12 12"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-sm text-slate-400 font-body"[39m
          [36m>[39m
            [0mSelect an action for this unit to perform[0m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 pt-0 space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-2 gap-4 p-3 bg-slate-800/50 rounded-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg font-semibold text-green-400"[39m
              [36m>[39m
                [0m10[0m
                [0m/[0m
                [0m10[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-xs text-slate-400"[39m
              [36m>[39m
                [0mHealth[0m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg font-semibold text-blue-400"[39m
              [36m>[39m
                [0m2[0m
                [0m/[0m
                [0m2[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-xs text-slate-400"[39m
              [36m>[39m
                [0mMovement[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"shrink-0 h-[1px] w-full bg-slate-700"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"none"[39m
          [36m/>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-2"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-semibold text-white font-cinzel"[39m
            [36m>[39m
              [0mAvailable Actions[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-3 rounded-lg border cursor-pointer transition-colors bg-slate-800/50 border-slate-600 hover:bg-slate-800"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-start justify-between"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-start gap-3"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"mt-1 text-purple-400"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mclass[39m=[32m"lucide lucide-move w-4 h-4"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 2v20"[3...
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > displays scout-specific actions 17ms
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > displays player rankings 44ms
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > shows game statistics 42ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > displays missionary-specific actions 25ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > shows heal action for missionaries with sufficient faith 18ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > disables actions when resources are insufficient 32ms
 Ã— shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > shows available actions with costs 36ms
   â†’ Unable to find an element with the text: Construct terrain improvements. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 pointer-events-auto"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"rounded-xl border text-card-foreground shadow w-[500px] max-h-[80vh] overflow-y-auto bg-slate-900 border-slate-600"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"font-semibold leading-none tracking-tight flex items-center gap-3 text-white font-cinzel"[39m
            [36m>[39m
              [36m<svg[39m
                [33mclass[39m=[32m"lucide lucide-crown w-6 h-6 text-purple-400"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M5 21h14"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mWorker[0m
              [0m Actions[0m
            [36m</div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border bg-background shadow-sm hover:text-accent-foreground h-9 w-9 border-slate-600 text-slate-400 hover:bg-slate-700"[39m
            [36m>[39m
              [36m<svg[39m
                [33mclass[39m=[32m"lucide lucide-x w-4 h-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M18 6 6 18"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 6 12 12"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-sm text-slate-400 font-body"[39m
          [36m>[39m
            [0mSelect an action for this unit to perform[0m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 pt-0 space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-2 gap-4 p-3 bg-slate-800/50 rounded-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg font-semibold text-green-400"[39m
              [36m>[39m
                [0m10[0m
                [0m/[0m
                [0m10[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-xs text-slate-400"[39m
              [36m>[39m
                [0mHealth[0m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg font-semibold text-blue-400"[39m
              [36m>[39m
                [0m2[0m
                [0m/[0m
                [0m2[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-xs text-slate-400"[39m
              [36m>[39m
                [0mMovement[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"shrink-0 h-[1px] w-full bg-slate-700"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"none"[39m
          [36m/>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-2"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-semibold text-white font-cinzel"[39m
            [36m>[39m
              [0mAvailable Actions[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-3 rounded-lg border cursor-pointer transition-colors bg-slate-800/50 border-slate-600 hover:bg-slate-800"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-start justify-between"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-start gap-3"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"mt-1 text-purple-400"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mclass[39m=[32m"lucide lucide-move w-4 h-4"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 2v20"[3...
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > calls onPlayAgain when Play Again button is clicked 63ms
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > calls onMainMenu when Main Menu button is clicked 40ms
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > displays elimination victory correctly 31ms
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > shows domination victory correctly 27ms
 âœ“ shared/components/VictoryScreen.test.tsx > VictoryScreen > displays winner stats correctly 35ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > handles action execution when button is clicked 47ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > renders save/load menu with title 88ms
stdout | shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > saves game to localStorage when save button is clicked
Game saved successfully: Test Save

 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > closes panel when close button is clicked 134ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > displays different unit types correctly 42ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > shows no actions message when unit has no available actions 23ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > handles unit actions for different unit types 24ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > displays save current game section when gameState exists 24ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > does not display save section when gameState is null 20ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > enables save button only when save name is entered 28ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > saves game to localStorage when save button is clicked 30ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > displays action requirements correctly 28ms
 âœ“ shared/components/UnitActionsPanel.test.tsx > UnitActionsPanel > handles special abilities based on unit type 16ms
stdout | shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > loads selected game when load button is clicked
Game loaded successfully: Test Save

 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > displays "No saved games found" when localStorage is empty 37ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > loads saved games from localStorage 56ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > loads selected game when load button is clicked 28ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > allows saving game with Enter key 17ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > shows import/export section 17ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > shows export button only when save is selected 55ms
stderr | shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > handles corrupt save data gracefully
Failed to load save: chronicles_save_corrupt SyntaxError: Unexpected token 'i', "invalid-json" is not valid JSON
    at JSON.parse (<anonymous>)
    at loadSavedGamesList [90m(/home/runner/workspace/[39mclient/src/components/ui/SaveLoadMenu.tsx:52:39[90m)[39m
    at [90m/home/runner/workspace/[39mclient/src/components/ui/SaveLoadMenu.tsx:38:5
    at commitHookEffectListMount [90m(/home/runner/workspace/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(/home/runner/workspace/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(/home/runner/workspace/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(/home/runner/workspace/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(/home/runner/workspace/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(/home/runner/workspace/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(/home/runner/workspace/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27023:14[90m)[39m

 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > deletes save when delete button is clicked 178ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > handles corrupt save data gracefully 82ms
 âœ“ shared/components/SaveLoadMenu.test.tsx > SaveLoadMenu > closes menu when close button is clicked 68ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > hexLine > should return a line between two adjacent hexes 4ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > hexLine > should return a line between distant hexes 1ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > hexLine > should return single hex for same start and end 1ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > hasLineOfSight > should have clear line of sight on plains 1ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > hasLineOfSight > should be blocked by mountains 0ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > hasLineOfSight > should respect range limits 0ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > hasLineOfSight > should allow line of sight to adjacent tiles 0ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > calculateVisibleTiles > should calculate visible tiles within range 1ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > calculateVisibleTiles > should not include tiles blocked by mountains 1ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > calculateVisibleTiles > should include tiles within range that are not blocked 0ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > getVisibleTilesInRange > should return visible tiles using shadow casting 1ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > getVisibleTilesInRange > should return visible tiles using basic algorithm 0ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > calculateFogOfWarState > should return visible state for currently visible tiles 1ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > calculateFogOfWarState > should return explored state for explored but not visible tiles 1ms
 âœ“ shared/utils/lineOfSight.test.ts > Line of Sight System > calculateFogOfWarState > should return hidden state for unexplored tiles 0ms
 âœ“ shared/data/units.test.ts > Unit Definitions > should have all unit types defined 2ms
 âœ“ shared/data/units.test.ts > Unit Definitions > should have complete unit stats 10ms
 âœ“ shared/data/units.test.ts > Unit Definitions > should retrieve unit definitions correctly 0ms
 âœ“ shared/data/units.test.ts > Unit Definitions > should have valid abilities arrays 1ms
 âœ“ shared/data/units.test.ts > Unit Definitions > should have appropriate costs for different unit types 0ms
 âœ“ shared/data/units.test.ts > Unit Definitions > should filter units by faction correctly 0ms
 âœ“ shared/data/units.test.ts > Unit Definitions > should have reasonable stat ranges 2ms
 âœ“ shared/data/units.test.ts > Unit Definitions > should have proper tech requirements structure 0ms
